
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "plum",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "teal",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "steelblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "plum",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "lightseagreen",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "steelblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "plum",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "lightseagreen",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "cadetblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "plum",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "lightseagreen",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "steelblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "plum",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "dodgerblue",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "steelblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "plum",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "darkcyan",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "steelblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "thistle",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "royalblue",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "cornflowerblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "orchid",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "royalblue",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "cornflowerblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "palevioletred",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "royalblue",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "cornflowerblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "palevioletred",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "steelblue",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "cornflowerblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
ggplot(plot_df_clean, aes(x = research_tier_2025, y = n, fill = public_private_profit)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +
labs(
title = "Count of Institutions by Research Activity Designation and Type (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Research Activity Designation",
y = "Count of Institutions",
fill = "Institution Type",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Public" = "seagreen",
"Private not-for-profit" = "darkorange",
"Private for-profit" = "saddlebrown"
),
labels = c(
"Public" = "Public",
"Private not-for-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)
) +
theme(
axis.text.y = element_text(size = 10),
axis.text.x = element_text(angle = 0, hjust = 0.5),
legend.position = "bottom",
legend.box = "horizontal",
legend.title = element_text(size = 12)
)
class_by_count <- ggplot(plot_df_clean, aes(x = research_tier_2025, y = n, fill = public_private_profit)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +
labs(
title = "Count of Institutions by Research Activity Designation and Type (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Research Activity Designation",
y = "Count of Institutions",
fill = "Institution Type",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Public" = "seagreen",
"Private not-for-profit" = "darkorange",
"Private for-profit" = "saddlebrown"
),
labels = c(
"Public" = "Public",
"Private not-for-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)
) +
theme(
axis.text.y = element_text(size = 10),
axis.text.x = element_text(angle = 0, hjust = 0.5),
legend.position = "bottom",
legend.box = "horizontal",
legend.title = element_text(size = 12)
)
class_by_count
# Ensure all combinations of 'public_private_profit' and 'research_tier_2025' are represented
plot_df_clean <- combined_df_na %>%
filter(!is.na(public_private_profit), !is.na(research_tier_2025)) %>%
count(research_tier_2025, public_private_profit) %>%
complete(research_tier_2025, public_private_profit, fill = list(n = 0))  # Fill missing combinations with 0
# Create the plot
ggplot(plot_df_clean, aes(x = public_private_profit, y = n, fill = research_tier_2025)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +  # Adjust width for equal bar widths
labs(
title = "Count of Institutions by Type and Research Activity Designation (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Institution Type",
y = "Count of Institutions",
fill = "Research Activity Designation",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Public" = "Public",
"Private non-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Research Colleges and Universities" = "palevioletred",  # Research Colleges stand out
"Research 1: Very High Research Spending and Doctorate Production" = "steelblue",  # R1 color
"Research 2: High Research Spending and Doctorate Production" = "cornflowerblue"  # R2 color
),
labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)
) +
theme(
axis.text.y = element_text(size = 10),
legend.position = "bottom",  # Move the legend to the bottom
legend.box = "horizontal",   # Makes the legend horizontal
legend.title = element_text(size = 12),  # Adding legend title size
axis.text.x = element_text(angle = 0, hjust = 0.5)  # Set x-axis labels to 0 degrees (normal)
)
ggplot(plot_df_clean, aes(x = research_tier_2025, y = n, fill = public_private_profit)) +
geom_bar(position = "dodge", stat = "identity", width = 0.7) +
labs(
title = "Count of Institutions by Research Activity Designation and Type (2025)",
subtitle = "Excludes institutions without a research designation",
x = "Research Activity Designation",
y = "Count of Institutions",
fill = "Institution Type",
caption = "Note: 'Research Colleges and Universities' are research-focused but do not meet R1 or R2 criteria"
) +
theme_minimal() +
scale_x_discrete(labels = c(
"Research Colleges and Universities" = "Research Colleges\nand Universities",
"Research 1: Very High Research Spending and Doctorate Production" = "R1",
"Research 2: High Research Spending and Doctorate Production" = "R2"
)) +
scale_y_continuous(limits = c(0, 150), expand = c(0, 0)) +
scale_fill_manual(
values = c(
"Public" = "seagreen",
"Private not-for-profit" = "darkorange",
"Private for-profit" = "saddlebrown"
),
labels = c(
"Public" = "Public",
"Private not-for-profit" = "Private (non-profit)",
"Private for-profit" = "Private (for-profit)"
)
) +
theme(
axis.text.y = element_text(size = 10),
axis.text.x = element_text(angle = 0, hjust = 0.5),
legend.position = "bottom",
legend.box = "horizontal",
legend.title = element_text(size = 12)
)
=======
library(ggplot2)
library(maps)
combined_df_na %>%
count(classification_2021) %>%
ggplot(aes(x = classification_2021, y = n, fill = classification_2021)) +
geom_bar(stat = "identity") +
labs(title = "Number of Institutions by Research Classification (2021)",
x = "Classification", y = "Number of Institutions") +
theme_minimal()
# Display a table of the count of missing values (NAs) per column
missing_data <- combined_df_na %>%
summarise(across(everything(), ~ sum(is.na(.)))) %>%
gather(key = "column_name", value = "NAs")
library(tidyverse)
library(readr)
library(tidyr)
library(dplyr)
library(lubridate)  # for Datetime formatting
library(stringr)  # for extracting URL
library(tidyverse)
library(readr)
library(tidyr)
library(dplyr)
library(lubridate)  # for Datetime formatting
library(stringr)  # for extracting URL
combined_df_na %>%
count(classification_2021) %>%
ggplot(aes(x = classification_2021, y = n, fill = classification_2021)) +
geom_bar(stat = "identity") +
labs(title = "Number of Institutions by Research Classification (2021)",
x = "Classification", y = "Number of Institutions") +
theme_minimal()
#head(classification_stats)
colnames(classification_stats)
classification_stats <- read_csv("carnegie_classification_stats - CLEAN.csv")
spending_doctorate_awards <- read_csv("carnegie_spending_doctorate_awards - CLEAN.csv")
#head(classification_stats)
colnames(classification_stats)
summary(classification_stats)
head(spending_doctorate_awards)
colnames(spending_doctorate_awards)
summary(spending_doctorate_awards)
classification_df <- data.frame(classification_stats)
class(classification_df)
spending_df <- data.frame(spending_doctorate_awards)
class(spending_df)
# Confirming column names on what to join by
colnames(classification_df)
colnames(spending_df)
# Perform full join on 'unitid'
combined_df <- full_join(classification_df, spending_df, by = "unitid")
# Confirm join and notice duplicate column names
colnames(combined_df)
# Duplicate School Names (there are 12)
combined_df %>%
filter(name.x != name.y) %>%
select(unitid, name.x, name.y)
# Duplicate City Names (there is 1, 'Des Moines' and 'West Des Moines')
combined_df %>%
filter(city.x != city.y ) %>%
select(unitid, city.x, city.y)
# Duplicate State Names (there are no duplicates)
combined_df %>%
filter(state.x != state.y) %>%
select(unitid, state.x, state.y)
# Create a new dataframe for mismatched rows
mismatched <- combined_df %>%
filter(name.x != name.y | city.x != city.y | state.x != state.y) %>%
select(unitid, name.x, name.y, city.x, city.y, state.x, state.y)
# View the mismatched rows
print(mismatched)
# Function to replace NULL with NA
replace_null_with_na <- function(x) {
if (is.list(x)) {
# Apply recursively if it's a list (to handle nested data frames)
return(lapply(x, replace_null_with_na))
} else if (is.null(x)) {
return(NA)  # Replace NULL with NA
} else {
return(x)  # Otherwise, return the value unchanged
}
}
# Use it to apply to a data frame
combined_df_na <- combined_df %>%
mutate(across(everything(), replace_null_with_na))
# View the result
summary(combined_df_na)
# Display a table of the count of missing values (NAs) per column
missing_data <- combined_df_na %>%
summarise(across(everything(), ~ sum(is.na(.)))) %>%
gather(key = "column_name", value = "NAs")
print(missing_data)
combined_df_na %>%
count(classification_2021) %>%
ggplot(aes(x = classification_2021, y = n, fill = classification_2021)) +
geom_bar(stat = "identity") +
labs(title = "Number of Institutions by Research Classification (2021)",
x = "Classification", y = "Number of Institutions") +
theme_minimal()
combined_df_na %>%
count(classific_2021) %>%
ggplot(aes(x = classific_2021, y = n, fill = classific_2021)) +
geom_bar(stat = "identity") +
labs(title = "Number of Institutions by Research Classification (2021)",
x = "Classification", y = "Number of Institutions") +
theme_minimal()
library(tidyverse)
library(readr)
library(tidyr)
library(dplyr)
library(lubridate)  # for Datetime formatting
library(stringr)  # for extracting URL
classification_stats <- read_csv("carnegie_classification_stats - CLEAN.csv")
spending_doctorate_awards <- read_csv("carnegie_spending_doctorate_awards - CLEAN.csv")
#head(classification_stats)
colnames(classification_stats)
summary(classification_stats)
head(spending_doctorate_awards)
colnames(spending_doctorate_awards)
summary(spending_doctorate_awards)
classification_df <- data.frame(classification_stats)
class(classification_df)
spending_df <- data.frame(spending_doctorate_awards)
class(spending_df)
# Confirming column names on what to join by
colnames(classification_df)
colnames(spending_df)
# Perform full join on 'unitid'
combined_df <- full_join(classification_df, spending_df, by = "unitid")
# Confirm join and notice duplicate column names
colnames(combined_df)
# Duplicate School Names (there are 12)
combined_df %>%
filter(name.x != name.y) %>%
select(unitid, name.x, name.y)
# Duplicate City Names (there is 1, 'Des Moines' and 'West Des Moines')
combined_df %>%
filter(city.x != city.y ) %>%
select(unitid, city.x, city.y)
# Duplicate State Names (there are no duplicates)
combined_df %>%
filter(state.x != state.y) %>%
select(unitid, state.x, state.y)
# Create a new dataframe for mismatched rows
mismatched <- combined_df %>%
filter(name.x != name.y | city.x != city.y | state.x != state.y) %>%
select(unitid, name.x, name.y, city.x, city.y, state.x, state.y)
# View the mismatched rows
print(mismatched)
# Function to replace NULL with NA
replace_null_with_na <- function(x) {
if (is.list(x)) {
# Apply recursively if it's a list (to handle nested data frames)
return(lapply(x, replace_null_with_na))
} else if (is.null(x)) {
return(NA)  # Replace NULL with NA
} else {
return(x)  # Otherwise, return the value unchanged
}
}
# Use it to apply to a data frame
combined_df_na <- combined_df %>%
mutate(across(everything(), replace_null_with_na))
# View the result
summary(combined_df_na)
# Display a table of the count of missing values (NAs) per column
missing_data <- combined_df_na %>%
summarise(across(everything(), ~ sum(is.na(.)))) %>%
gather(key = "column_name", value = "NAs")
print(missing_data)
combined_df_na %>%
count(classific_2021) %>%
ggplot(aes(x = classific_2021, y = n, fill = classific_2021)) +
geom_bar(stat = "identity") +
labs(title = "Number of Institutions by Research Classification (2021)",
x = "Classification", y = "Number of Institutions") +
theme_minimal()

