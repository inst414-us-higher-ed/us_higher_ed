---
title: "us_higher_ed"
output: html_document
name: Diamond Andy, Lily Gates, Mia Leandri, Colin Thompson
date: 04/20/2025
---
-----------------------------------------------
# PROJECT OVERVIEW
-----------------------------------------------

# Description of Project
Exploring the differences between American research colleges and universities through data visualization.

## Research Question/Topic
1. Descriptive and Comparative Question
**How do different tiered American research colleges and universities compare in terms of location, admissions, academic offerings, doctoral degrees awarded, and other institutional characteristics?**

2. Analytical and Inferential Question
**How do other institutional characteristics, besides financial expenditures, predict or correlate with research designation tiers among American colleges and universities?**

## Data and Research Sources
`carnegie_spending_doctorate_awards`
(See c`arnegie_research_activity_desig_factsheet.pdf` for more info)
* School
* Location (City, State)
* Classification (R1, R2, Other) — From 2021 and 2025
* Expenses (2021, 2022, 2023)
* Research Doctorates Awarded (2020, 2021, 2022)

`carnegie_classification_stats`
(See `carnegie_variable_descr_flowchart.pdf` for more info)
* School
    * Filtering main school if applicable (e.g., UMBC, UMD, UMES all are “University of Maryland” sub schools)
* Location (City, State, residential or not)
* Public or private (non-profit, for-profit)
* Description of types of degree programs offered
* Enrollment information
* Classification on tier (R1, R2, Other)

-----------------------------------------------
# CODE BEGINS
-----------------------------------------------

# Importing Libraries
```{r}
library(tidyverse)
library(readr)
library(tidyr)
library(dplyr)
library(lubridate)  # for Datetime formatting
library(stringr)  # for extracting URL
```

# Reading in Data
```{r}
classification_stats <- read_csv("carnegie_classification_stats - CLEAN.csv")

spending_doctorate_awards <- read_csv("carnegie_spending_doctorate_awards - CLEAN.csv")
```

# Preview and Summarize Data
```{r}
#head(classification_stats)
colnames(classification_stats)
summary(classification_stats)

head(spending_doctorate_awards)
colnames(spending_doctorate_awards)
summary(spending_doctorate_awards)
```

------------------------------------------------------
# CREATING DATAFRAMES
------------------------------------------------------

# Convert Both Imported CSVs to Dataframes
```{r}
classification_df <- data.frame(classification_stats)
class(classification_df)

spending_df <- data.frame(spending_doctorate_awards)
class(spending_df)
```

```{r}
# Connfirming column names on what to join by
colnames(classification_df)
colnames(spending_df)
```

# Combine Both into Single Dataframe
# Note: has name.x and name.y
- This is because the `classification_df` and `spending_df` both have "name" but it was raising an error: "Error: unexpected symbol" for that column when trying to do a full join

```{r}
combined_df <- full_join(classification_df, spending_df, by = c("unitid", "city", "state"))

summary(combined_df)
colnames(combined_df)

```

------------------------------------------------------
# CLEANING DATA
------------------------------------------------------

# Cleaning Data -- Fill missing values with "NA"
```{r}
# Fill missing values with "NA"
combined_df_filled <- combined_df %>% mutate(across(.cols = everything(), .fns = function(x) ifelse(is.na(x), NA, x)))
#summary(combined_df_filled)
```

# Cleaning Data -- Find differences for "name" columns
## NOTE:
  `name.x` is from the `name` column from the `classified_df`
  `name.y` is from the `name` column from the `spending_df`

```{r}
names_from_classified <- combined_df_filled['name.x']
names_from_spending <- combined_df_filled['name.y']
```

```{r}
# Calculates TRUE, FLASE, or NAs if values in Names are equal
summary(combined_df_filled['name.x'] == combined_df_filled['name.y'])
```

```{r}
# Dataframe that contains the mismatched names and NA names (There are 16)
names_not_equal <- combined_df_filled[combined_df_filled['name.x'] != combined_df_filled['name.y'], ]

# Prints the University IDs, name.x and name.y of mismatched and NA school names
print(names_not_equal[c('unitid', 'name.x', 'name.y')])

```

------------------------------------------------------
# VISUALIZATIONS
------------------------------------------------------

# Visualization Name (e.g., Line plot of Research Expenses from 2020 to 2023)
  * Description about what variables you are measuring
  * ~3 sentence summary about visualization
```{r}

```


